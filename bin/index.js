#!/usr/bin/env node
/*!
@io-arc/preset-setup-files
Make it easy to install frequently used files.

Version: 1.0.0
License: MIT
Documents: https://github.com/io-arc/preset-setup-files#readme

Copyright (c) 2021 arc one
*/
"use strict";var e=require("commander"),t=require("update-notifier"),r=require("inquirer");function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var c=o(t),s=o(r);let i,n,l,a,p=!0;"undefined"!=typeof process&&(({FORCE_COLOR:i,NODE_DISABLE_COLORS:n,NO_COLOR:l,TERM:a}=process.env),p=process.stdout&&process.stdout.isTTY);const u=!n&&null==l&&"dumb"!==a&&(null!=i&&"0"!==i||p);function h(e,t){let r=new RegExp(`\\x1b\\[${t}m`,"g"),o=`[${e}m`,c=`[${t}m`;return function(e){return u&&null!=e?o+(~(""+e).indexOf(c)?e.replace(r,c+o):e)+c:e}}const d=h(31,39),f=h(32,39),m={editorConfig:".editorConfig",gitignore:".gitignore",npmrc:".npmrc",npmignore:".npmignore",browserslistrc:".browserslistrc",prettierrc:".prettierrc",prettierrcJson:".prettierrc.json",prettierrcJson5:".prettierrc.json5",prettierrcYml:".prettierrc.yml",prettierrcYaml:".prettierrc.yaml",prettierrcJs:".prettierrc.js",prettierrcCjs:".prettierrc.cjs",prettierrcConfigJs:".prettierrc.config.js",prettierrcConfigCjs:".prettierrc.config.cjs",prettierrcToml:".prettierrc.toml"};class g{constructor(){this.#defaultChecked=[m.editorConfig,m.gitignore,m.browserslistrc,m.prettierrc],this.#choices=async()=>{const{editorConfig:e,gitignore:t,npmrc:r,npmignore:o,browserslistrc:c,prettierrc:i,prettierrcJson:n,prettierrcJson5:l,prettierrcYml:a,prettierrcYaml:p,prettierrcJs:u,prettierrcCjs:h,prettierrcConfigJs:d,prettierrcConfigCjs:f,prettierrcToml:g}=m;try{const m=await s.default.prompt([{type:"checkbox",name:"templates",message:"Choice setup files",loop:!1,choices:[{value:e,checked:this.#setBool(e)},{value:t,checked:this.#setBool(t)},{value:r,checked:this.#setBool(r)},{value:o,checked:this.#setBool(o)},{value:c,checked:this.#setBool(c)},new s.default.Separator,{value:i,checked:this.#setBool(i)},{value:n,checked:this.#setBool(n)},{value:l,checked:this.#setBool(l)},{value:a,checked:this.#setBool(a)},{value:p,checked:this.#setBool(p)},{value:u,checked:this.#setBool(u)},{value:h,checked:this.#setBool(h)},{value:d,checked:this.#setBool(d)},{value:f,checked:this.#setBool(f)},{value:g,checked:this.#setBool(g)},new s.default.Separator]}]);return this.#updateChecked(m.templates),m.templates}catch(e){return console.error(e),1}},this.#confirm=async()=>{try{return(await s.default.prompt({type:"confirm",name:"confirm",message:"Are you sure you want to create this?",default:!0})).confirm}catch(e){return console.error(e),1}},this.#updateChecked=e=>{this.#defaultChecked=e},this.#setBool=e=>this.#defaultChecked.includes(e)}#defaultChecked;async exec(){if("number"==typeof await this.#choices())return 1;const e=await this.#confirm();if("number"==typeof e)return 1;if(!e){const[e]=await Promise.all([this.exec()]);return e}}#choices;#confirm;#updateChecked;#setBool}c.default({pkg:{name:"@io-arc/preset-setup-files",version:"1.0.0"}}).notify(),process.stdin.resume(),process.on("SIGINT",(()=>{console.log(f("Bye !")),process.exit(0)})),e.program.version("1.0.0");(async()=>{const e=new g;if(null!=await e.exec())return console.log(d("Oops X(")),void process.exit(1);console.log("complete")})();
