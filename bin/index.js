#!/usr/bin/env node
/*!
@io-arc/preset-setup-files
Make it easy to install frequently used files.

Version: 1.0.0
License: MIT
Documents: https://github.com/io-arc/preset-setup-files#readme

Copyright (c) 2021 arc one
*/
"use strict";var e=require("commander"),t=require("kleur"),r=require("update-notifier"),c=require("cpx"),s=require("inquirer"),i=require("path");function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var l=o(r),n=o(c),a=o(s),p=o(i);const h={editorConfig:".editorConfig",gitignore:".gitignore",npmrc:".npmrc",npmignore:".npmignore",browserslistrc:".browserslistrc",prettierrc:".prettierrc",prettierrcJson:".prettierrc.json",prettierrcJson5:".prettierrc.json5",prettierrcYml:".prettierrc.yml",prettierrcYaml:".prettierrc.yaml",prettierrcJs:".prettierrc.js",prettierrcCjs:".prettierrc.cjs",prettierrcConfigJs:".prettierrc.config.js",prettierrcConfigCjs:".prettierrc.config.cjs",prettierrcToml:".prettierrc.toml",eslintrcJs:".eslintrc.js",eslintrcCjs:".eslintrc.cjs",eslintrcYml:".eslintrc.yml",eslintrcYaml:".eslintrc.yaml",eslintrcJson:".eslintrc.json",eslintignore:".eslintignore"};class u{constructor(){this.#checkedItem=[h.editorConfig,h.gitignore,h.browserslistrc,h.prettierrc,h.eslintrcYml],this.#checkbox=async()=>{const{editorConfig:e,gitignore:t,npmrc:r,npmignore:c,browserslistrc:s,prettierrc:i,prettierrcJson:o,prettierrcJson5:l,prettierrcYml:n,prettierrcYaml:p,prettierrcJs:u,prettierrcCjs:d,prettierrcConfigJs:m,prettierrcConfigCjs:f,prettierrcToml:g,eslintrcJs:k,eslintrcCjs:v,eslintrcYml:y,eslintrcYaml:B,eslintrcJson:w,eslintignore:C}=h;try{const h=await a.default.prompt([{type:"checkbox",name:"templates",message:"Choice setup files",loop:!1,choices:[{value:e,checked:this.#setBool(e)},{value:t,checked:this.#setBool(t)},{value:r,checked:this.#setBool(r)},{value:c,checked:this.#setBool(c)},{value:s,checked:this.#setBool(s)},new a.default.Separator,{value:i,checked:this.#setBool(i)},{value:o,checked:this.#setBool(o)},{value:l,checked:this.#setBool(l)},{value:n,checked:this.#setBool(n)},{value:p,checked:this.#setBool(p)},{value:u,checked:this.#setBool(u)},{value:d,checked:this.#setBool(d)},{value:m,checked:this.#setBool(m)},{value:f,checked:this.#setBool(f)},{value:g,checked:this.#setBool(g)},new a.default.Separator,{value:k,checked:this.#setBool(k)},{value:v,checked:this.#setBool(v)},{value:y,checked:this.#setBool(y)},{value:B,checked:this.#setBool(B)},{value:w,checked:this.#setBool(w)},new a.default.Separator,{value:C,checked:this.#setBool(C)},new a.default.Separator]},{type:"confirm",name:"confirm",message:"Are you sure you want to create this?",default:!0}]);return this.#updateChecked(h.templates),{confirm:h.confirm}}catch(e){return console.error(e),1}},this.#updateChecked=e=>{this.#checkedItem=e},this.#setBool=e=>this.#checkedItem.includes(e)}#checkedItem;async choices(){const e=await this.#checkbox();if("number"==typeof e)return 1;if(!e.confirm){const[e]=await Promise.all([this.choices()]);return e}}async copy(){try{const{overwrite:e}=await a.default.prompt({type:"confirm",name:"overwrite",message:"If the file has the same name, it will be overwritten.",default:!1});n.default.copySync(`${p.default.dirname(__filename)}/templates/{${this.#checkedItem.join(",")}}`,"",{update:e}),console.log(t.green("=== Files copy is done! ==="))}catch(e){return console.error(e),1}}#checkbox;#updateChecked;#setBool}l.default({pkg:{name:"@io-arc/preset-setup-files",version:"1.0.0"}}).notify(),process.stdin.resume(),process.on("SIGINT",(()=>{console.log(t.green("Bye !")),process.exit(0)})),e.program.version("1.0.0").parse(process.argv),(async()=>{const e=new u,r=()=>{console.log(t.red("Oops X(")),process.exit(1)};await(async()=>{null!=await e.choices()&&r()})(),await(async()=>{null!=await e.copy()&&r()})(),process.exit(0)})();
